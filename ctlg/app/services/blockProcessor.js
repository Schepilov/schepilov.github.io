app.factory("blockProcessor",["$interval",function(a){var b,c,d,e=120,f=10,g=[],h=0,i=0,j=!1,k=!1,l=!1,m=function(){if(!j&&h<g.length){if(h-i<f){var e=g[h],m=function(a){++i,d(e,a)};c(e).then(m,m),++h}}else k=!0,l=!1,a.cancel(b)};return{setBlockSize:function(a){f=a},setIntervalDuration:function(a){e=a},startProcess:function(f,n,o){g=f,c=n,d=o,j=!1,k=!1,l=!0,h=0,i=0,b=a(m,e)},abortProcess:function(){l=!1,j=!0},hasFinished:function(){return k&&i===h},isProcessing:function(){return l||h>0&&i<h},getProgress:function(a){var b=g.length;return 0===b?1:!0===a?h/b:i/b}}}]);